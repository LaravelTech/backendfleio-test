{"version":3,"sources":["./src/app/reseller/billing/history/billing-history/billing-history.component.html","./src/app/reseller/billing/history/tabs/billing-history-overview/billing-history-overview.component.html","./src/app/reseller/billing/history/billing-history/billing-history.component.scss","./src/app/reseller/billing/history/billing-history/billing-history.component.ts","./src/app/reseller/billing/history/history-routing.module.ts","./src/app/reseller/billing/history/history.module.ts","./src/app/reseller/billing/history/tabs/billing-history-overview/billing-history-overview.component.scss","./src/app/reseller/billing/history/tabs/billing-history-overview/billing-history-overview.component.ts","./src/app/shared/ui/objects-view/details-component-base.ts"],"names":[],"mappings":"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","file":"history-history-module-es2015.js","sourcesContent":["module.exports = \"<app-object-details [detailsData]=\\\"detailsData\\\">\\n\\n</app-object-details>\\n\"","module.exports = \"<div fxLayout=\\\"column\\\" *ngFor=\\\"let serviceUsage of usage | keyvalue\\\">\\n  <div class=\\\"full-width\\\" fxFlex=\\\"100\\\">\\n    <mat-expansion-panel class=\\\"full-width\\\">\\n      <mat-expansion-panel-header>\\n        <mat-panel-title class=\\\"half-width\\\">\\n          {{serviceUsage.value.income.client_display}} - Service '{{serviceUsage.value.income.service_display}}'\\n        </mat-panel-title>\\n        <mat-panel-description>\\n          {{serviceUsage.value.income.price}}&nbsp;{{serviceUsage.value.income.client_currency.code}}\\n          <ng-container *ngIf=\\\"serviceUsage.value.cost\\\">\\n            ({{serviceUsage.value.cost.price}}&nbsp;{{serviceUsage.value.cost.client_currency.code}})\\n          </ng-container>\\n        </mat-panel-description>\\n      </mat-expansion-panel-header>\\n      <app-fleio-service-dynamic-usage [dynamicUsage]=\\\"serviceUsage.value.income\\\"\\n                                       [dynamicUsageCost]=\\\"serviceUsage.value.cost\\\">\\n      </app-fleio-service-dynamic-usage>\\n    </mat-expansion-panel>\\n  </div>\\n</div>\\n\"","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3Jlc2VsbGVyL2JpbGxpbmcvaGlzdG9yeS9iaWxsaW5nLWhpc3RvcnkvYmlsbGluZy1oaXN0b3J5LmNvbXBvbmVudC5zY3NzIn0= */\"","import { Component, OnInit } from '@angular/core';\nimport { IDetailsData } from '../../../../shared/ui/objects-view/interfaces/details/details-data';\nimport { BillingHistoryOverviewComponent } from '../tabs/billing-history-overview/billing-history-overview.component';\n\n@Component({\n  selector: 'app-billing-history',\n  templateUrl: './billing-history.component.html',\n  styleUrls: ['./billing-history.component.scss']\n})\nexport class BillingHistoryComponent implements OnInit {\n  detailsData: IDetailsData = {\n    header: {\n      title: {\n        text: 'Billing history',\n      }\n    },\n    tabs: [{\n      tabName: 'Overview',\n      component: BillingHistoryOverviewComponent,\n    }],\n  };\n\n  constructor() { }\n\n  ngOnInit() {\n  }\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { BillingHistoryComponent } from './billing-history/billing-history.component';\nimport { AuthGuard } from '../../../shared/auth/auth.guard';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BillingHistoryComponent,\n    canActivate: [AuthGuard],\n    data: {\n      config: {\n        feature: 'billing.history'\n      }\n    }\n  },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class HistoryRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { BillingHistoryComponent } from './billing-history/billing-history.component';\nimport { HistoryRoutingModule } from './history-routing.module';\nimport { ObjectsViewModule } from '../../../shared/ui/objects-view/objects-view.module';\nimport { BillingHistoryOverviewComponent } from './tabs/billing-history-overview/billing-history-overview.component';\nimport { MatExpansionModule } from '@angular/material/expansion';\nimport { MatTableModule } from '@angular/material/table';\nimport { MatDividerModule } from '@angular/material/divider';\nimport { FleioDataControlsModule } from '../../../shared/fleio-data-controls/fleio-data-controls.module';\nimport { FlexLayoutModule } from '@angular/flex-layout';\nimport { MatSlideToggleModule } from '@angular/material/slide-toggle';\nimport { ReactiveFormsModule } from '@angular/forms';\n\n\n@NgModule({\n  declarations: [\n    BillingHistoryComponent,\n    BillingHistoryOverviewComponent,\n  ],\n  entryComponents: [\n    BillingHistoryOverviewComponent,\n  ],\n  imports: [\n    CommonModule,\n    HistoryRoutingModule,\n    ObjectsViewModule,\n    MatExpansionModule,\n    MatTableModule,\n    MatDividerModule,\n    FleioDataControlsModule,\n    FlexLayoutModule,\n    MatSlideToggleModule,\n    ReactiveFormsModule,\n  ]\n})\nexport class HistoryModule { }\n","module.exports = \".total {\\n  float: right;\\n}\\n\\n.details-row {\\n  height: 0;\\n}\\n\\n.element-detail {\\n  overflow: hidden;\\n  display: -webkit-box;\\n  display: flex;\\n}\\n\\n.price-cell {\\n  float: right;\\n  width: 25%;\\n}\\n\\n.indent {\\n  margin-left: 20px;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL2dpdGxhYi1ydW5uZXIvYnVpbGRzLzFVZkJYU1M2LzEvZmxlaW8vZmxlaW8vbmdmcm9udGVuZC9zcmMvYXBwL3Jlc2VsbGVyL2JpbGxpbmcvaGlzdG9yeS90YWJzL2JpbGxpbmctaGlzdG9yeS1vdmVydmlldy9iaWxsaW5nLWhpc3Rvcnktb3ZlcnZpZXcuY29tcG9uZW50LnNjc3MiLCJzcmMvYXBwL3Jlc2VsbGVyL2JpbGxpbmcvaGlzdG9yeS90YWJzL2JpbGxpbmctaGlzdG9yeS1vdmVydmlldy9iaWxsaW5nLWhpc3Rvcnktb3ZlcnZpZXcuY29tcG9uZW50LnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxZQUFBO0FDQ0Y7O0FERUE7RUFDRSxTQUFBO0FDQ0Y7O0FERUE7RUFDRSxnQkFBQTtFQUNBLG9CQUFBO0VBQUEsYUFBQTtBQ0NGOztBREVBO0VBQ0UsWUFBQTtFQUNBLFVBQUE7QUNDRjs7QURFQTtFQUNFLGlCQUFBO0FDQ0YiLCJmaWxlIjoic3JjL2FwcC9yZXNlbGxlci9iaWxsaW5nL2hpc3RvcnkvdGFicy9iaWxsaW5nLWhpc3Rvcnktb3ZlcnZpZXcvYmlsbGluZy1oaXN0b3J5LW92ZXJ2aWV3LmNvbXBvbmVudC5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnRvdGFsIHtcbiAgZmxvYXQ6IHJpZ2h0O1xufVxuXG4uZGV0YWlscy1yb3cge1xuICBoZWlnaHQ6IDA7XG59XG5cbi5lbGVtZW50LWRldGFpbCB7XG4gIG92ZXJmbG93OiBoaWRkZW47XG4gIGRpc3BsYXk6IGZsZXg7XG59XG5cbi5wcmljZS1jZWxsIHtcbiAgZmxvYXQ6IHJpZ2h0O1xuICB3aWR0aDogMjUlO1xufVxuXG4uaW5kZW50IHtcbiAgbWFyZ2luLWxlZnQ6IDIwcHg7XG59XG4iLCIudG90YWwge1xuICBmbG9hdDogcmlnaHQ7XG59XG5cbi5kZXRhaWxzLXJvdyB7XG4gIGhlaWdodDogMDtcbn1cblxuLmVsZW1lbnQtZGV0YWlsIHtcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgZGlzcGxheTogZmxleDtcbn1cblxuLnByaWNlLWNlbGwge1xuICBmbG9hdDogcmlnaHQ7XG4gIHdpZHRoOiAyNSU7XG59XG5cbi5pbmRlbnQge1xuICBtYXJnaW4tbGVmdDogMjBweDtcbn0iXX0= */\"","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { DetailsComponentBase } from '../../../../../shared/ui/objects-view/details-component-base';\nimport { IBaseFleioObjectModel } from '../../../../../shared/fleio-api/base-model/base-fleio-object.model';\nimport { FleioObjectsList } from '../../../../../shared/fleio-api/fleio-objects-list';\nimport { IServiceDynamicUsageModel } from '../../../../../shared/fleio-api/billing/model/service-dynamic-usage.model';\nimport {\n  ServiceDynamicUsagesApiService\n} from '../../../../../shared/fleio-api/billing/service-dynamic-usage/service-dynamic-usages-api.service';\n\n@Component({\n  selector: 'app-billing-history-overview',\n  templateUrl: './billing-history-overview.component.html',\n  styleUrls: ['./billing-history-overview.component.scss']\n})\nexport class BillingHistoryOverviewComponent\n  extends DetailsComponentBase<IBaseFleioObjectModel> implements OnInit, OnDestroy {\n  serviceDynamicUsageList: FleioObjectsList<IServiceDynamicUsageModel> = null;\n  usage: { [serviceId: string]: { income?: IServiceDynamicUsageModel, cost?: IServiceDynamicUsageModel } } = {};\n\n  constructor(private serviceDynamicUsagesApiService: ServiceDynamicUsagesApiService) {\n    super();\n  }\n\n  ngOnInit() {\n    this.serviceDynamicUsagesApiService.list().subscribe((list) => {\n      this.serviceDynamicUsageList = list;\n      for (const serviceDynamicUsage of list.objects) {\n        if (serviceDynamicUsage.service) {\n          if (!this.usage[serviceDynamicUsage.service]) {\n            this.usage[serviceDynamicUsage.service] = {};\n          }\n          this.usage[serviceDynamicUsage.service].income = serviceDynamicUsage;\n        } else {\n          if (!this.usage[serviceDynamicUsage.reseller_service]) {\n            this.usage[serviceDynamicUsage.reseller_service] = {};\n          }\n          this.usage[serviceDynamicUsage.reseller_service].cost = serviceDynamicUsage;\n        }\n      }\n    });\n  }\n}\n","import { IObjectController } from './interfaces/object-controller';\nimport { Input, OnDestroy } from '@angular/core';\nimport { IBaseFleioObjectModel } from '../../fleio-api/base-model/base-fleio-object.model';\nimport { DEFAULT_BOOST_INTERVALS, RefreshTimer } from '../../ui-api/helpers/refresh-timer';\n\nexport class DetailsComponentBase<ObjectType extends IBaseFleioObjectModel> implements OnDestroy {\n  @Input() objectController: IObjectController;\n  @Input() componentTabIndex: number;\n\n  protected tabActive = false;\n  protected refreshTimer: RefreshTimer;\n\n  ngOnDestroy(): void {\n    if (this.refreshTimer) {\n      this.refreshTimer.stop();\n      delete this.refreshTimer;\n    }\n  }\n\n  protected get object(): ObjectType {\n    return this.objectController.object as ObjectType;\n  }\n\n  protected initTabEvents() {\n    this.objectController.currentTabIndex$.subscribe(tabIndex => {\n      if (tabIndex === this.componentTabIndex) {\n        if (!this.tabActive) {\n          this.tabActive = true;\n          this.tabActivated();\n        }\n      } else {\n        if (this.tabActive) {\n          this.tabActive = false;\n          this.tabDeactivated();\n        }\n      }\n    });\n  }\n\n  protected setupRefreshTimer(interval: number) {\n    this.initTabEvents();\n    this.refreshTimer = new RefreshTimer(interval, () => {\n      this.refreshData();\n    }, false);\n  }\n\n  protected boostRefreshTimer(boostIntervals: number[] = DEFAULT_BOOST_INTERVALS) {\n    if (!this.refreshTimer) {\n      console.error('refresh timer is not initialized');\n      return;\n    }\n\n    this.refreshTimer.boost(boostIntervals);\n  }\n\n  protected tabActivated() {\n    if (this.refreshTimer) {\n      this.refreshData();\n      this.refreshTimer.start();\n    }\n  }\n\n  protected tabDeactivated() {\n    if (this.refreshTimer) {\n      this.refreshTimer.stop();\n    }\n  }\n\n  protected refreshData() {\n  }\n}\n"],"sourceRoot":""}